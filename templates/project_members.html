{% extends "base.html" %}

{% block content %}
<div class="card">
    <div class="profile-header">
        <h2>–£—á–∞—Å—Ç–Ω–∏–∫–∏ –ø—Ä–æ–µ–∫—Ç–∞: {{ project.name }}</h2>
        <div>
            <a href="{{ url_for('project_workspace', project_id=project.id) }}" class="btn">‚Üê –ù–∞–∑–∞–¥ –∫ –ø—Ä–æ–µ–∫—Ç—É</a>
        </div>
    </div>

    <div class="projects-grid">
        {% for member in members %}
            <div class="project-card">
                <h4>{{ member.user.username }}</h4>
                <p><strong>–†–æ–ª—å:</strong>
                    {% if project.owner_id == current_user.id and member.user_id != current_user.id %}
                        <form method="POST" action="{{ url_for('edit_member_role', project_id=project.id, member_id=member.id) }}" style="display: inline;">
                            <input type="text" name="role" value="{{ member.role }}" style="padding: 0.25rem; font-size: 14px;">
                            <button type="submit" style="background: none; border: none; cursor: pointer;">üíæ</button>
                        </form>
                    {% else %}
                        {{ member.role }}
                    {% endif %}
                </p>
                <p><strong>–ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏–ª—Å—è:</strong> {{ member.joined_at.strftime('%d.%m.%Y') }}</p>

                {% if project.owner_id == current_user.id and member.user_id != current_user.id %}
                    <form method="POST" action="{{ url_for('remove_member', project_id=project.id, member_id=member.id) }}"
                          onsubmit="return confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç–æ–≥–æ —É—á–∞—Å—Ç–Ω–∏–∫–∞?')">
                        <button type="submit" class="btn" style="background: #dc3545; margin-top: 0.5rem;">–£–¥–∞–ª–∏—Ç—å</button>
                    </form>
                {% endif %}
            </div>
        {% endfor %}
    </div>
</div>
{% endblock %}