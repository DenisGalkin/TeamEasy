{% extends "base.html" %}

{% block content %}
<div class="card">
    <div class="profile-header">
        <h2>Настройки проекта: {{ project.name }}</h2>
        <div>
            <a href="{{ url_for('project_workspace', project_id=project.id) }}" class="btn">← Назад к проекту</a>
        </div>
    </div>

    <form method="POST">
        <div class="form-group">
            <label for="project_name">Название проекта:</label>
            <input type="text" id="project_name" name="project_name" value="{{ project.name }}" required>
        </div>

        <div class="form-group">
            <label for="project_description">Описание проекта:</label>
            <textarea id="project_description" name="project_description" rows="4" required>{{ project.description }}</textarea>
        </div>

        <div class="form-group">
            <label for="github_url">GitHub репозиторий:</label>
            <input type="url" id="github_url" name="github_url" value="{{ project.github_url }}" placeholder="https://github.com/username/repo">
        </div>

        <div class="form-group">
            <label for="category">Категория проекта:</label>
            <select id="category" name="category">
                {% for key, value in CATEGORIES.items() %}
                    <option value="{{ key }}" {% if project.category == key %}selected{% endif %}>{{ value }}</option>
                {% endfor %}
            </select>
        </div>

        <div class="form-group">
            <label for="is_public">Видимость проекта:</label>
            <select id="is_public" name="is_public">
                <option value="true" {% if project.is_public %}selected{% endif %}>Публичный</option>
                <option value="false" {% if not project.is_public %}selected{% endif %}>Приватный</option>
            </select>
        </div>

        <button type="submit" class="btn">Сохранить изменения</button>
    </form>

    <div style="margin-top: 3rem; padding-top: 2rem; border-top: 1px solid #ddd;">
        <h3 style="color: #dc3545;">Опасная зона</h3>
        <p>Удаление проекта невозможно отменить. Все данные проекта будут безвозвратно удалены.</p>
        <form method="POST" action="{{ url_for('delete_project', project_id=project.id) }}" 
              onsubmit="return confirm('Вы уверены, что хотите удалить проект? Это действие невозможно отменить.')">
            <button type="submit" class="btn" style="background: #dc3545;">Удалить проект</button>
        </form>
    </div>
</div>
{% endblock %}