{% extends "base.html" %}

{% block content %}
    <div class="page-header">
        <div style="display: flex; justify-content: space-between; align-items: flex-start;">
            <div>
                <h1>{{ project.name }}</h1>
                <p>{{ CATEGORIES.get(project.category) }}</p>
            </div>
            <div style="display: flex; gap: 1rem; align-items: center;">
                <a href="{{ url_for('my_projects') }}" class="btn btn-outline">← Назад</a>
            </div>
        </div>
    </div>

    <div class="grid grid-cols-3" style="gap: 2rem;">
        <div class="card" style="grid-column: span 2;">
            <div class="card-content">
                <h3 style="margin-bottom: 1.5rem; color: var(--text-primary);">Главная</h3>

                <div style="display: flex; flex-direction: column; gap: 1.5rem;">
                    <div>
                        <label style="font-size: 14px; color: var(--text-secondary); margin-bottom: 0.5rem;">Описание</label>
                        <div style="background: var(--sidebar-bg); padding: 1.5rem; border-radius: 8px; line-height: 1.6;">
                            {{ project.description|replace('\n', '<br>')|safe }}
                        </div>
                    </div>

                    {% if project.github_url %}
                        <div>
                            <label style="font-size: 14px; color: var(--text-secondary); margin-bottom: 0.5rem;">GitHub
                                репозиторий</label>
                            <p>
                                <a href="{{ project.github_url }}" target="_blank"
                                   style="color: var(--primary-color); text-decoration: none; font-weight: 500;">
                                    {{ project.github_url }}
                                </a>
                            </p>
                        </div>
                    {% endif %}
                </div>
            </div>
        </div>

        <div class="card">
            <div class="card-content">
                <h3 style="margin-bottom: 1.5rem; color: var(--text-primary);">Меню</h3>

                <div style="display: flex; flex-direction: column; gap: 1rem;">
                    <a href="{{ url_for('project_members', project_id=project.id) }}" class="btn btn-outline"
                       style="justify-content: start;">Участники</a>
                    <a href="{{ url_for('project_calendar', project_id=project.id) }}" class="btn btn-outline"
                       style="justify-content: start;">Календарь</a>
                    <a href="{{ url_for('project_tasks', project_id=project.id) }}" class="btn btn-outline"
                       style="justify-content: start;">Задачи</a>
                    {% if project.owner_id == current_user.id %}
                        <a href="{{ url_for('project_settings', project_id=project.id) }}" class="btn btn-outline"
                           style="justify-content: start;">Настройки проекта</a>
                    {% endif %}
                </div>

                <div style="margin-top: 2rem; padding-top: 2rem; border-top: 1px solid var(--border-color);">
                    <div style="display: flex; flex-direction: column; gap: 1rem;">
                        <div>
                            <label style="font-size: 12px; color: var(--text-secondary);">Видимость</label>
                            <p style="font-weight: 500;">{{ "Публичный" if project.is_public else "Приватный" }}</p>
                        </div>
                        <div>
                            <label style="font-size: 12px; color: var(--text-secondary);">Создан</label>
                            <p style="font-weight: 500;">{{ project.created_at.strftime('%d %b %Y') }}</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
{% endblock %}